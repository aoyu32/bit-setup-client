// ==================== 颜色映射定义 ====================
@use "sass:map";
@use "sass:meta";
@use "sass:color";
@use "sass:math";

$colors: (
    // 主品牌色
    c-p: #1677ff,
    c-p-light: #4096ff,
    c-p-lighter: #69b1ff,
    c-p-lightest: #bae0ff,
    c-p-dark: #0958d9,
    c-p-darker: #003eb3,
    c-p-darkest: #002c8c,

    // 辅助品牌色
    c-s: #722ed1,
    c-s-light: #9254de,
    c-s-lighter: #b37feb,
    c-s-lightest: #efdbff,
    c-s-dark: #531dab,
    c-s-darker: #391085,
    c-s-darkest: #22075e,

    // 中性色
    c-g: #ffffff,
    c-g0: #fafafa,
    c-g1: #f5f5f5,
    c-g2: #f0f0f0,
    c-g3: #d9d9d9,
    c-g4: #bfbfbf,
    c-g5: #8c8c8c,
    c-g6: #595959,
    c-g7: #434343,
    c-g8: #262626,
    c-g9: #1f1f1f,
    c-g10: #000000,

    // 功能色
    success: #52c41a,
    warning: #faad14,
    error: #ff4d4f,
    info: #1890ff,

);

/// 快速生成阴影
/// @param {string} $size - 阴影尺寸 (small/medium/large)
/// @param {color} $color - 阴影颜色 (默认rgba(#000, 0.15))
/// @param {number} $opacity - 阴影透明度 (0-1, 可选)
@function shadow($size: 'medium', $color: null, $opacity: null) {
    // 设置默认阴影颜色
    $shadow-color: if($color, $color, rgba(#000, 0.15));

    // 处理透明度覆盖
    @if $opacity !=null {
        $shadow-color: rgba($shadow-color, $opacity);
    }

    // 返回不同尺寸的阴影
    @if $size =='s' {
        @return 0 1px 2px 0 $shadow-color;
    }

    @else if $size =='m' {
        @return 0 2px 6px 0 $shadow-color;
    }

    @else if $size =='l' {
        @return 0 4px 12px 0 $shadow-color;
    }

    @else {
        @warn "Shadow size '#{$size}' is invalid. Use s/m/l.";
        @return 0 2px 6px 0 $shadow-color; // 默认返回中等阴影
    }
}

// 颜色透明度调整
// 用法: alpha($color-primary, 0.5)
@function alpha($color, $opacity) {
    @return rgba($color, $opacity);
}

@function color($key, $opacity: null) {
    @if map.has-key($colors, $key) {
        $color: map.get($colors, $key);

        @if $opacity !=null {
            @return rgba($color, $opacity);
        }

        @else {
            @return $color;
        }
    }

    @warn "Unknown theme color: #{$key}";
    @return null;
}

// 颜色明度调整 - 使颜色变亮
// 用法: lighten-color($color-primary, 10%)
@function lighten($color, $percentage) {
    $color-value: if(meta.type-of($color)=='string', color($color), $color);
    @return color.scale($color-value, $lightness: $percentage);
}

// 颜色明度调整 - 使颜色变暗
// 用法: darken-color($color-primary, 10%)
@function darken($color, $percentage) {
    $color-value: if(meta.type-of($color)=='string', color($color), $color);
    @return color.scale($color-value, $lightness: -$percentage);
}

/// 智能颜色调整 (自动判断变亮/变暗)
/// @param {string|color} $color - 颜色键名或具体颜色值
/// @param {number} $percentage - 百分比 (-100%到100%)
/// @param {number} $opacity - 可选透明度 (0-1)
@function adjust-color($color, $percentage, $opacity: null) {
    // 首先检查是否是字符串类型的颜色名称
    $color-value: if(meta.type-of($color)=='string', color($color), $color);

    // 检查颜色值是否为null
    @if $color-value ==null {
        @warn "Color '#{$color}' not found in $colors map or is not a valid color";

        // 如果是字符串但在map中找不到，尝试直接使用这个颜色名
        @if meta.type-of($color)=='string' {
            @if $color =='white' {
                $color-value: #ffffff;
            }

            @else if $color =='black' {
                $color-value: #000000;
            }

            @else {
                // 如果不是特殊处理的颜色名，返回一个默认颜色
                $color-value: #000000;
            }
        }

        @else {
            $color-value: #000000;
        }
    }

    // 应用亮度调整
    $adjusted-color: color.scale($color-value, $lightness: $percentage);

    // 应用透明度（如果提供）
    @return if($opacity, rgba($adjusted-color, $opacity), $adjusted-color);
}